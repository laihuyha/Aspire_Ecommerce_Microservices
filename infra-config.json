{
  "version": "1.0",
  "environment": "development",
  "services": {
    "postgres": {
      "catalog": {
        "image": "postgres:16-alpine",
        "user": "postgres",
        "password": "devpassword123",
        "db": "CatalogDB",
        "port": 5433,
        "targetPort": 5432,
        "volume": "catalog_data",
        "healthcheck": {
          "interval": "10s",
          "timeout": "5s",
          "retries": 5,
          "startPeriod": "10s"
        },
        "resources": {
          "limits": {
            "memory": "256M"
          },
          "reservations": {
            "memory": "128M"
          }
        }
      },
      "basket": {
        "image": "postgres:16-alpine",
        "user": "postgres",
        "password": "devpassword123",
        "db": "BasketDb",
        "port": 5434,
        "targetPort": 5432,
        "volume": "basket_data",
        "healthcheck": {
          "interval": "10s",
          "timeout": "5s",
          "retries": 5,
          "startPeriod": "10s"
        },
        "resources": {
          "limits": {
            "memory": "256M"
          },
          "reservations": {
            "memory": "128M"
          }
        }
      }
    },
    "redis": {
      "image": "redis:7-alpine",
      "port": 6379,
      "targetPort": 6379,
      "volume": "redis_data",
      "command": "redis-server --appendonly yes --maxmemory 128mb --maxmemory-policy allkeys-lru",
      "healthcheck": {
        "interval": "10s",
        "timeout": "3s",
        "retries": 3,
        "startPeriod": "5s"
      },
      "resources": {
        "limits": {
          "memory": "256M"
        },
        "reservations": {
          "memory": "128M"
        }
      }
    },
    "redisCommander": {
      "image": "rediscommander/redis-commander:latest",
      "port": 7001,
      "targetPort": 8081,
      "httpUser": "admin",
      "httpPassword": "devpassword123",
      "redisHosts": "local:distributedcache:6379",
      "resources": {
        "limits": {
          "memory": "128M"
        },
        "reservations": {
          "memory": "64M"
        }
      }
    }
  },
  "apis": {
    "catalog": {
      "image": "${DOCKER_REGISTRY:-catalog}/catalog.api:${TAG:-latest}",
      "httpPort": 6000,
      "httpsPort": 6060,
      "targetHttpPort": 8080,
      "targetHttpsPort": 8081,
      "environment": "Development",
      "healthcheck": {
        "test": "curl -f http://localhost:8080/health || exit 1",
        "interval": "30s",
        "timeout": "10s",
        "retries": 3,
        "startPeriod": "40s"
      },
      "resources": {
        "limits": {
          "memory": "512M",
          "cpus": "0.5"
        },
        "reservations": {
          "memory": "256M",
          "cpus": "0.25"
        }
      }
    }
  },
  "docker": {
    "registry": "catalog",
    "tag": "latest",
    "network": {
      "name": "ecommerce-network",
      "driver": "bridge",
      "subnet": "172.20.0.0/16"
    }
  },
  "debug": {
    "forceRestart": false
  }
}
